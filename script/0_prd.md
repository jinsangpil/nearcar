# 니어카 통합 플랫폼 — 제품 요구사항 정의서(PRD)

## 0. 서비스 개요
“고객이 중고차를 사기 전, 3분 안에 신청 → 당일 기사 배정 → 진단 후 1시간 내 레포트 수령”을 가능하게 하는 **중고차 온라인 진단 플랫폼**.

현재 "홈페이지 + 구글폼 + 슬랙 + 채널톡"을 단일 웹 시스템으로 통합하는 것이 목표.

---

# 1. 사용자 유형 & 권한 정의

## 1.1 고객(Client)
### 주요 권한
- 회원가입 또는 비회원(전화번호 인증) 신청
- 진단 신청 / 옵션 선택 / 결제
- 신청 상태 조회
- 레포트 열람 및 다운로드(PDF)
- 후기 작성(별점 + 코멘트)

---

## 1.2 진단기사(Inspector)
### 주요 권한
- 로그인 후 개인 대시보드 이용
- 배정된 일정 확인 / 수락·거절
- 고객 연락처 조회
- 진단 체크리스트 작성
- 사진·영상 업로드
- 레포트 작성 및 제출
- 정산 내역 조회(건별 / 월별)

---

## 1.3 내부직원(Staff)
### 주요 권한
- 신청 리스트 확인
- 자동배정 결과 검토 및 수동 수정
- 기사 수동 배정
- 상담/문의 메모 기록
- 클레임 처리 및 환불
- 레포트 재발송

---

## 1.4 운영자(Admin)
### 주요 권한
- 모든 Staff 기능 + 시스템 설정 전체 관리
- 매출/전환율 통계 조회
- 기사 등급/수수료율/활동지역 설정
- 패키지 가격 / 쿠폰 / 프로모션 관리
- 채널(유입경로) 통계 관리

---

# 2. 전체 프로세스 흐름 정의

## STEP 1. 고객 신청
1. 고객이 웹/모바일웹 접속 → “중고차 진단 신청하기” 클릭
2. 입력 항목
   - 차량번호 또는 차종/연식/주행거리/연료 **국토교통부 API** 를 이용하여 기본정보 로드
   - 국산/수입/고성능 여부
   - 구매유형 (매매단지 / 직거래 / 홈서비스차량)
   - 차량 위치(주소 + 지도검색)
   - 희망 날짜/시간대
   - 진단방식 선택(전문가와 동행 / 전문가만 보내기)
   - 검수 패키지 선택 (풀페지, 라이트 A, 라이트 B, 라이트 C)
   - 이름/연락처/이메일 (본인인증 or 인증코드)
3. 결제(카드/계좌이체)
4. 완료 시 고객 : 알림톡+SMS+이메일 발송, 운영자/어드민 : 알림톡+슬랙알림

---

## STEP 2. 기사 자동 매칭(초기에는 수동으로 한다.)
### 매칭 조건
1. 지역: 차량 위치 기준 반경 30km
2. 시간: 희망시간 ±2시간
3. 차종/난이도 가능 기사만
4. 공평 배분: 최근 7일 배정 적은 기사 우선

### 프로세스
- 시스템이 1순위 기사에게 ‘수락/거절’ 요청(10분 제한)
- 수락 시 배정 확정 → 고객에게 알림
- 거절 시 자동으로 다음 후보 이동
- 초기에는 수동: 어드민에서 직접 기사 배정 → 배정받은 기사는 확인 클릭

---

## STEP 3. 진단 진행
- 기사 대시보드에서 일정 확인
- “배정된 건” 리스트 확인 ‘수락 / 거절’ (거절시 사유를 작성하고 운영자에 알림톡+슬랙 알림)
- 고객과 통화하여 시간·장소 확정
- 현장 방문 후 체크리스트 기반 진단 수행

### 체크리스트 예시
- 사고유무(교환/판금/도색/프레임)
- 엔진룸(누유/누수/소음)
- 하부(부싱/오일팬/부식/누유)
- 미션/변속감
- 전장품(에어컨/센서/썬루프 등)
- 타이어/브레이크/소모품
- 도막기 측정값
- 사진 촬영 후 업로드
- 특이사항 텍스트 입력
- 수리 권장 항목 + 예상비용
- 종합평가: 구매가능 / 보류 / 비추천

---

## STEP 4. 레포트 작성 & 발송
- 기사 입력값 기반 자동 PDF/웹 레포트 제출/자동발송
- 기사 제출 → 기사 관리에서 레포트 검토 체크시에는 운영자 검토 후 “최종 발송” 버튼
- 고객 이메일 자동 발송 + 알림톡/SMS 알림
- 마이페이지에서도 열람 가능 

---

## STEP 5. 정산
- 진단 완료 즉시 정산 테이블 기록
- 매일 0시 집계
- 일/주/월 단위 정산 예정액 산출
- 기사별 진단 건수 / 누적금액
- 기사 대시보드에서 확인 가능

---

# 3. 관리자/운영 화면 요구사항

## 3.1 대시보드
- 오늘/주/월 기준 신청·결제·매출·배정 현황
- 지역별/기사별 분포
- 유입경로 통계(네이버, 유튜브, 블로그, 직접 등)

## 3.2 고객관리
- 고객/기사 계정 관리

## 3.3 신청 관리
- 필터: 상태/지역/기사
- 신청 상세보기
- 매물 중심 정보 + 시세/사진/옵션: **car365 API** 를 이용하여 매매용차량 조회, 침수차량 조회
- 기사 배정/변경 (자동배정은 추후 연동)
- 일정 변경
- 상담/클레임 메모
- 환불 처리
- 진단 결과 / 리포트 상세보기

## 3.4 기사 관리
- 기사 리스트
- 등급/활동지역/가능차종/수수료율 관리
- 휴무 설정
- 실적/평점 조회

## 3.5 패키지관리
- 패키지 리스트
- 패키지 등록 수정 삭제 (풀패키지 / 라이트 A..등)
- 패키지별 포함될 리스트 관리 (엔진, 하부, 내부 등등)  

## 3.6 자동차 리스트 관리
- 국내/해외 / 제조사 / 모델 / 상세모델 / 클래스 등
- 스크래핑 DB 관리

## 3.7 차종별 금액 관리
- 국산 / 경차, 소형, 중형, 대형A, 대형B 별 금액관리
- 수입 / 소형, 준준형, 중형, 대형, 고성능, 슈퍼카별 금액 관리

## 3.8 서비스 지역 관리
- 지역(특별시, 광역시, 도 단위)
- 세부지역(시,구 단위)
- 추가요금

## 3.9 정산관리
- 진단 완료 즉시 정산 테이블 기록
- 매일 0시 집계
- 일/주/월 단위 정산 예정액 산출
- 기사별 진단 건수 / 누적금액
- 기사 수수료 계산 (시스템 설정에 기본 수수료관리 / 기사별 관리)
   예) 고객 결제금액의 70% → 기사 몫
	•	정산 화면에서:
	•	기사 A: 10건 × 15만원 = 150만원 매출 → 105만원 정산
- 기사별 정산액, 정산 상태(미정산/정산완료) 표시
- 정산 엑셀 다운로드 (세무처리용 export 기능)

---

# 4. 기능 요구사항 상세

## 4.1 고객 기능
- 비회원 신청 + 인증번호 로그인
- 결제 후 실시간 상태조회
- 레포트 열람/다운로드
- 후기 기능(별점 + 코멘트)

## 4.2 기사 기능
- 본인 계정 로그인
- 배정된 건 조회 (전화연락후 상태변경)
- 매물 중심 정보 + 시세/사진/옵션: **car365 API** 를 이용하여 매매용차량 조회, 침수차량 조회
- 일정 캘린더
- 진단 체크리스트 입력 UI
- 이미지 업로드(모바일 최적화)
- 레포트 제출 버튼 → 자동 발송
- 정산 내역 페이지

## 4.3 운영 기능
- 고객/기사 계정 관리
- 전체 예약조회 (상담 메모)
- 기사 배정 변경(반자동 배정)
- 패키지 관리
- 자동차 모델 관리 / 스크래핑
- 차종별 금액 설정
- 서비스 지역 등록 / 추가금액 설정
- 정산관리(기사별 매출/수당)
- 클레임/환불 처리
- 시스템 설정(기사별 정산 수수료, 쿠폰 등)
- 통계 차트

---

# 5. 비기능 요구사항

## 성능
- 고객 신청 처리: 3초 이내 응답
- 레포트 자동 생성: 30초 이내
- 일일 5,000건 트래픽까지 대응 가능하도록 설계

## 보안
- JWT 기반 인증
- 파일 업로드는 S3 또는 유사 객체 스토리지
- 개인정보 암호화 저장

## 안정성
- 알림톡 실패 시 SMS fallback
- 10초 단위 배정 타임아웃 처리

---

# 6. 버전별 로드맵

## ✅ V1
- 고객 신청/결제/상태조회
- 기사 로그인/일정/레포트작성
- 운영자 신청관리 + 반자동 배정
- 기본 알림(카톡/SMS/이메일)
- 간단 정산표(엑셀)

## ✅ V2
- 자동배정 고도화
- 기사 스코어링
- 정산 자동화(PDF)
- 후기/평점
- 쿠폰/프로모션

## ✅ V3
- AI 요약 레포트
- 차량 시세/리스크 자동 분석
- B2B 확장
- API 제공

---

# 7. 향후 확장 고려
- AI 분석 엔진
- 외부 파트너 API(중고차 플랫폼) 연동
- 딜러/경매장 전용 기능


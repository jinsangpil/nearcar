<context>
# Overview  
니어카(NearCar)는 "고객이 중고차를 사기 전, 3분 안에 신청 → 당일 기사 배정 → 진단 후 1시간 내 레포트 수령"을 가능하게 하는 **중고차 온라인 진단 플랫폼**입니다.

현재 "홈페이지 + 구글폼 + 슬랙 + 채널톡"으로 파편화되어 운영되던 시스템을 단일 웹 시스템으로 통합하여 운영 효율성을 극대화하고, 고객 경험을 개선하는 것이 목표입니다.

**핵심 가치 제안:**
- 빠른 신청 프로세스: 차량번호 입력부터 결제까지 3분 이내
- 신속한 배정: 당일 기사 배정 및 고객 알림
- 정확한 진단: 전문 기사가 현장에서 체계적인 진단 수행
- 즉시 레포트: 진단 완료 후 1시간 내 PDF 레포트 발송

**주요 사용자:**
- 고객(Client): 중고차 구매 전 진단을 받고자 하는 일반 소비자
- 진단기사(Inspector): 현장에서 차량 진단을 수행하는 전문가
- 내부직원(Staff): 신청 관리 및 기사 배정을 담당하는 운영진
- 운영자(Admin): 시스템 전반의 설정 및 통계 관리 담당자

# Core Features  
## 1. 고객 신청 및 결제 시스템
- **차량 정보 입력**: 차량번호 기반 국토교통부 API 연동으로 자동 제원 조회, 또는 제조사/모델 계층형 선택 UI
- **동적 견적 산출**: 차량 등급(Class) 및 지역에 따른 자동 할증 계산 (기본 패키지 가격 + 차종 할증 + 지역 출장비)
- **단계별 신청 프로세스**: 차량정보 → 옵션/견적 → 일정선택 → 본인인증 → 결제 (5단계)
- **결제 연동**: PG사(토스/아임포트) 연동 및 결제 검증 시스템

## 2. 기사 배정 및 관리 시스템
- **수동 배정 (V1)**: 운영자가 신청 건을 검토하여 적합한 기사 수동 배정
- **기사 수락/거절**: 배정된 기사가 일정 확인 후 수락 또는 거절 (거절 시 사유 입력)
- **자동 배정 (V2 예정)**: 거리(30km 반경), 시간(희망시간 ±2시간), 차종 난이도, 공평 배분 알고리즘 기반 자동 매칭

## 3. 진단 체크리스트 및 레포트 시스템
- **체계적 진단 항목**: 외관, 엔진룸, 하부, 실내, 전장품 등 섹션별 체크리스트
- **사진/영상 업로드**: 부위별 사진 촬영 및 S3 직접 업로드 (Presigned URL 방식)
- **자동 PDF 생성**: 진단 결과 기반 PDF 레포트 자동 생성 (Celery 비동기 처리)
- **웹/PDF 뷰어**: 고객이 웹에서 레포트 열람 및 PDF 다운로드 가능

## 4. 차량 마스터 데이터 관리
- **표준화된 차량 정보**: 제조사 → 모델 → 상세모델 계층 구조로 차량 정보 표준화
- **등급(Class) 기반 가격 정책**: 경차/소형/중형/대형/슈퍼카 등 차량 등급별 할증 자동 적용
- **외부 API 연동**: 국토교통부 API(차량 제원), Car365 API(침수 이력, 실매물 조회)

## 5. 정산 관리 시스템
- **자동 정산 계산**: 진단 완료 즉시 정산 테이블 기록, 기사별 수수료율 적용
- **정산 내역 조회**: 기사 대시보드에서 건별/월별 정산 내역 확인
- **엑셀 다운로드**: 운영자가 정산 데이터를 엑셀 형식으로 다운로드 (세무 처리용)

## 6. 알림 시스템
- **다채널 알림**: 카카오 알림톡, SMS, 이메일 동시 발송
- **실시간 상태 알림**: 신청 완료, 기사 배정, 레포트 발송 등 단계별 고객 알림
- **운영자 알림**: 신규 신청, 기사 거절, 클레임 발생 시 운영자에게 슬랙/알림톡 발송

# User Experience  
## 사용자 페르소나

### 고객 (Client)
- **특징**: 중고차 구매를 고려하는 30-50대 남녀, 스마트폰 사용에 익숙함
- **니즈**: 빠르고 간편한 진단 신청, 신뢰할 수 있는 전문가 진단, 명확한 레포트
- **주요 여정**: 메인 랜딩 → 차량번호 조회 → 견적 확인 → 결제 → 배정 대기 → 레포트 수령 → 후기 작성

### 진단기사 (Inspector)
- **특징**: 자동차 정비 경력 5년 이상, 모바일 기기 사용에 능숙함
- **니즈**: 효율적인 일정 관리, 쉬운 체크리스트 입력, 빠른 정산 확인
- **주요 여정**: 로그인 → 배정 요청 확인 → 수락/거절 → 현장 방문 → 체크리스트 작성 → 레포트 제출 → 정산 확인

### 운영자 (Admin/Staff)
- **특징**: 내부 직원, PC 환경에서 업무 수행
- **니즈**: 전체 신청 현황 파악, 빠른 기사 배정, 데이터 관리 편의성
- **주요 여정**: 대시보드 확인 → 미배정 건 검토 → 기사 배정 → 레포트 검수 → 정산 관리

## 주요 사용자 플로우

### 고객 신청 플로우
1. **랜딩 페이지 접속**: 서비스 소개 및 차량번호 조회 CTA
2. **차량 정보 입력**: 차량번호 입력 또는 제조사/모델 선택
3. **견적 확인**: 지역 및 패키지 선택 시 실시간 가격 계산 표시
4. **일정 선택**: 캘린더에서 날짜 및 시간 슬롯 선택
5. **본인 인증**: 휴대폰 번호 입력 및 인증번호 확인 (비회원 로그인)
6. **결제**: 최종 금액 확인 후 PG사 결제 진행
7. **신청 완료**: 신청 번호 안내 및 배정 대기 안내

### 기사 진단 플로우
1. **배정 확인**: 대시보드에서 신규 배정 요청 확인
2. **수락/거절**: 일정 및 거리 확인 후 수락 또는 거절 (사유 입력)
3. **고객 연락**: 수락 후 고객에게 전화하여 시간/장소 확정
4. **현장 방문**: 네비게이션 연동하여 현장 도착
5. **진단 수행**: 체크리스트 기반 섹션별 진단 및 사진 촬영
6. **레포트 작성**: 특이사항 텍스트 입력 및 종합 의견 작성
7. **제출**: 최종 확인 후 레포트 제출 (PDF 자동 생성)

## UI/UX 고려사항

### 모바일 최적화 (고객/기사)
- **터치 친화적**: 버튼 크기 최소 44x44px, 충분한 여백
- **단계별 진행**: 진행률 표시 및 이전 단계로 돌아가기 가능
- **오프라인 대응**: 네트워크 오류 시 재시도 안내 및 로컬 저장

### 데스크탑 최적화 (운영자)
- **데이터 테이블**: 필터링, 정렬, 검색 기능 강화
- **대시보드**: 주요 지표를 한눈에 볼 수 있는 차트 및 통계
- **배치 작업**: 여러 건을 한 번에 처리할 수 있는 기능

### 접근성
- **키보드 네비게이션**: 모든 기능을 키보드로 접근 가능
- **스크린 리더 지원**: 주요 정보에 적절한 ARIA 레이블
- **색상 대비**: WCAG AA 기준 준수
</context>
<PRD>
# Technical Architecture  
## 시스템 구성 요소

### 프론트엔드 (Next.js)
- **Framework**: Next.js 14+ (App Router) - SSR 및 SEO 최적화
- **Language**: TypeScript - 정적 타입 지원으로 런타임 에러 방지
- **State Management**: 
  - Zustand: 전역 상태 관리 (신청 폼 데이터, 사용자 정보)
  - TanStack Query: 서버 상태 동기화 및 캐싱 (API 응답 데이터)
- **UI Framework**: TailwindCSS - 유틸리티 기반 빠른 스타일링
- **배포**: Static Build 후 Nginx 서빙 또는 `next start` 포트 포워딩

### 백엔드 (FastAPI)
- **Framework**: FastAPI (ASGI) - 비동기 처리 최적화, 고성능
- **Runtime**: Python 3.11+ (venv 가상환경)
- **Process Manager**: systemd + Gunicorn + Uvicorn Worker
- **Validation**: Pydantic - 엄격한 데이터 검증
- **Async Queue**: Celery + Redis - 알림 발송, PDF 생성, 외부 API 연동 등 비동기 작업

### 데이터베이스
- **PostgreSQL 15+**: 메인 관계형 DB
  - 사용자, 예약, 결제, 차량 마스터 정보 저장
  - JSONB 타입 활용 (체크리스트, 이미지 리스트 등 유연한 데이터 구조)
- **Redis 7+**: In-memory 저장소
  - 사용자 세션 관리
  - 차량 모델 리스트 API 캐싱 (TTL: 1시간)
  - Celery Broker 및 Result Backend

### 외부 인터페이스
- **국토교통부 API**: 차량 번호 기반 기본 제원 조회 (차명, 제원, 연식 등)
- **Car365 API**: 실매물 조회 및 침수 이력 확인
- **PG사 (토스/아임포트)**: 결제 처리 및 검증
- **카카오 알림톡 (BizTalk)**: 알림 발송
- **SMS (Twilio/NHN)**: 알림톡 실패 시 Fallback
- **SMTP (AWS SES)**: 이메일 발송

### 인프라
- **Cloud**: AWS (EC2/ECS) 또는 GCP
- **Storage**: AWS S3 - 이미지, 영상, PDF 리포트 파일 저장 (Presigned URL 방식)
- **CDN**: CloudFront - 정적 자원 로딩 최적화
- **Reverse Proxy**: Nginx - SSL Termination, Gzip 압축, 정적 파일 캐싱
- **Process Management**: systemd - 서비스 자동 시작 및 재시작 관리

## 데이터 모델 핵심 구조

### 사용자 관리
- **users**: 통합 사용자 테이블 (고객/기사/운영자 역할 구분)
- **service_regions**: 서비스 지역 및 지역별 출장비 관리

### 차량 데이터
- **vehicle_master**: 차량 마스터 데이터 (제조사/모델/등급 계층 구조)
- **vehicles**: 고객이 신청한 개별 차량 정보 (마스터 데이터 매핑)
- **price_policies**: 차량 등급(Class)별 추가 요금 정책

### 진단 프로세스
- **packages**: 진단 패키지 관리 (풀패키지, 라이트 A/B/C 등)
- **inspections**: 진단 신청 정보 (상태: requested → assigned → report_submitted → sent)
- **inspection_reports**: 진단 레포트 (체크리스트 JSONB, 이미지 리스트, PDF URL)

### 결제 및 정산
- **payments**: 결제 정보 (PG사 거래 ID, 금액, 상태)
- **settlements**: 기사 정산 내역 (건별/월별 집계, 수수료율 적용)

## 주요 비즈니스 로직

### 가격 계산 엔진
1. 기본 패키지 가격 조회 (`packages.base_price`)
2. 차량 등급별 할증 조회 (`price_policies.add_amount` - `vehicle_master.vehicle_class` 매핑)
3. 지역별 출장비 조회 (`service_regions.extra_fee`)
4. 총액 = 기본가격 + 차종할증 + 지역할증

### 배정 로직 (V1: 수동, V2: 자동)
- **V1**: 운영자가 신청 건을 검토하여 적합한 기사 수동 선택
- **V2 (예정)**: 
  - 거리: 차량 위치 기준 반경 30km 이내
  - 시간: 희망시간 ±2시간 매칭
  - 차종 난이도: 해당 차량 클래스 진단 가능 자격 보유 기사만 필터링
  - 공평 배분: 최근 7일 배정 적은 기사 우선

### 외부 API 연동 전략
- **캐싱**: 동일 차량 번호 조회 시 Redis에 24시간 캐싱 (API 비용 절감)
- **비동기 처리**: 국토부/Car365 API 호출은 Celery Worker에서 처리 (응답 지연 대응)
- **Fallback**: 외부 API 장애 시 수동 입력 유도 (서비스 중단 방지)
- **Retry**: Exponential Backoff 정책 적용

## 보안 및 성능

### 보안
- **인증**: JWT 기반 토큰 인증 (Access Token)
- **개인정보 암호화**: 전화번호 등 민감 정보는 AES-256 암호화 저장
- **파일 업로드**: S3 Presigned URL 방식으로 서버 부하 최소화
- **HTTPS 강제**: SSL/TLS 통신 (Let's Encrypt 인증서)

### 성능
- **캐싱 전략**: 차량 마스터 데이터 Redis 캐싱 (필터 로딩 속도 100ms 이내)
- **비동기 처리**: PDF 생성, 알림 발송은 Celery Queue로 처리 (사용자 대기 시간 최소화)
- **데이터베이스 최적화**: 인덱스 설계 (users.phone, inspections.status, vehicle_master.manufacturer 등)
- **CDN 활용**: 정적 자원(이미지, CSS, JS) CloudFront 배포

# Development Roadmap  
## MVP (V1) - 필수 기능

### Phase 1: 핵심 인프라 구축
- **데이터베이스 설계 및 구축**
  - PostgreSQL 스키마 생성 (users, vehicles, inspections, reports 등)
  - 차량 마스터 데이터 초기 적재 (국산/수입 주요 차종)
  - 인덱스 및 제약조건 설정
- **백엔드 API 개발**
  - FastAPI 프로젝트 구조 설정
  - 인증 시스템 (JWT 토큰 발급/검증)
  - 차량 마스터 조회 API (제조사/모델 계층 구조)
  - 견적 산출 API (가격 정책 기반 계산)
- **프론트엔드 기본 구조**
  - Next.js 프로젝트 초기화
  - 레이아웃 컴포넌트 (Header, Footer)
  - 라우팅 구조 설정

### Phase 2: 고객 신청 플로우
- **차량 정보 입력 화면**
  - 차량번호 조회 UI (국토부 API 연동)
  - 제조사/모델 계층형 선택 UI (Cascading Dropdown)
  - 차량 정보 확인 및 수정 기능
- **견적 및 옵션 선택 화면**
  - 지역 선택 (시/도 → 시/구/군)
  - 패키지 선택 (라디오 버튼)
  - 실시간 견적 계산 및 표시
- **일정 선택 화면**
  - 캘린더 UI (날짜 선택)
  - 시간 슬롯 선택
- **본인 인증 및 결제**
  - 휴대폰 인증번호 발송/확인
  - PG사 결제 연동 (토스/아임포트)
  - 결제 검증 및 신청 완료 처리

### Phase 3: 기사 배정 및 진단
- **운영자 배정 화면**
  - 신청 목록 조회 (필터링: 상태/지역/날짜)
  - 기사 목록 조회 (거리/평점 기반 추천)
  - 수동 배정 기능
- **기사 대시보드**
  - 배정 요청 목록 조회
  - 수락/거절 기능 (거절 시 사유 입력)
  - 오늘의 일정 캘린더 뷰
- **진단 체크리스트 작성**
  - 섹션별 체크리스트 UI (외관/엔진/하부/실내 등)
  - 사진 업로드 기능 (S3 Presigned URL)
  - 특이사항 텍스트 입력
  - 레포트 제출 기능

### Phase 4: 레포트 생성 및 발송
- **PDF 생성 시스템**
  - Celery Task로 비동기 PDF 생성
  - 레포트 템플릿 디자인 (ReportLab/WeasyPrint)
  - S3 업로드 및 URL 저장
- **레포트 뷰어**
  - 웹 뷰어 (고객 마이페이지)
  - PDF 다운로드 기능
  - 이미지 확대 보기

### Phase 5: 알림 및 정산
- **알림 시스템**
  - 카카오 알림톡 연동
  - SMS Fallback (알림톡 실패 시)
  - 이메일 발송 (레포트 첨부)
- **정산 관리**
  - 진단 완료 시 정산 테이블 자동 기록
  - 기사별 정산 내역 조회 API
  - 운영자 정산 관리 화면 (엑셀 다운로드)

## V2 - 고도화 기능

### 자동 배정 시스템
- 거리/시간/차종 난이도 기반 자동 매칭 알고리즘
- 기사 스코어링 시스템 (평점, 거리, 최근 배정 이력)
- 배정 요청 자동 순환 (10분 타임아웃)

### 고급 기능
- 후기 및 평점 시스템 (고객 → 기사)
- 쿠폰 및 프로모션 관리
- 정산 자동화 (PDF 명세서 발송)
- 통계 대시보드 고도화 (지역별/차종별 분석)

## V3 - 확장 기능

### AI 및 분석
- AI 기반 레포트 요약 (GPT 연동)
- 차량 시세/리스크 자동 분석
- 중고차 플랫폼 연동 (B2B)

### B2B 확장
- 딜러/경매장 전용 기능
- API 제공 (외부 파트너 연동)
- 대량 진단 신청 처리

# Logical Dependency Chain
## 개발 순서의 논리적 의존성

### Foundation Layer (최우선)
1. **데이터베이스 스키마 설계**
   - 모든 기능의 기반이 되는 데이터 구조 정의
   - 차량 마스터 데이터 초기 적재 (필터링 UI 개발 전 필수)
   - 가격 정책 테이블 설정 (견적 계산 전 필수)

2. **인증 시스템**
   - JWT 토큰 발급/검증 로직
   - 모든 API의 전제 조건

3. **차량 마스터 조회 API**
   - 제조사/모델 계층 구조 API 개발
   - 프론트엔드 필터링 UI 개발의 전제 조건

### User-Facing Layer (빠른 시각화)
4. **고객 신청 플로우 (프론트엔드 우선)**
   - 차량 정보 입력 화면 (차량번호 조회 또는 모델 선택)
   - 견적 산출 화면 (실시간 가격 계산)
   - 일정 선택 화면
   - 본인 인증 화면
   - 결제 화면
   - **목표**: 가능한 빠르게 사용자가 볼 수 있는 화면 완성

5. **견적 산출 API (백엔드)**
   - 가격 정책 기반 계산 로직
   - 프론트엔드 견적 화면과 동시 개발 가능

6. **결제 연동**
   - PG사 연동 및 결제 검증
   - 신청 완료 처리 및 DB 저장

### Operational Layer (운영 효율화)
7. **운영자 관리 화면**
   - 신청 목록 조회 및 필터링
   - 기사 목록 조회
   - 수동 배정 기능
   - **목표**: 운영자가 실제로 사용할 수 있는 관리 도구 완성

8. **기사 대시보드**
   - 배정 요청 확인
   - 수락/거절 기능
   - 일정 캘린더

### Value Delivery Layer (가치 전달)
9. **진단 체크리스트 작성**
   - 섹션별 체크리스트 UI
   - 사진 업로드 기능
   - 레포트 제출 기능

10. **레포트 생성 및 발송**
    - PDF 생성 시스템 (비동기)
    - 레포트 뷰어 (웹/PDF)
    - 고객 알림 발송

### Optimization Layer (최적화)
11. **알림 시스템**
    - 카카오 알림톡 연동
    - SMS/이메일 Fallback
    - 단계별 알림 트리거

12. **정산 관리**
    - 자동 정산 계산
    - 정산 내역 조회
    - 엑셀 다운로드

## 개발 우선순위 원칙

1. **데이터 정확성 우선**: 차량 마스터 데이터와 가격 정책이 정확해야 견적이 신뢰할 수 있음
2. **사용자 경험 우선**: 가능한 빠르게 프론트엔드 화면을 완성하여 실제 사용 흐름을 검증
3. **원자적 기능 단위**: 각 기능은 독립적으로 개발 가능하되, 의존성 순서를 준수
4. **점진적 개선**: V1에서 기본 기능 완성 후, V2/V3에서 고도화 기능 추가

# Risks and Mitigations  
## 기술적 도전 과제

### 외부 API 의존성
- **리스크**: 국토교통부 API 또는 Car365 API 장애 시 서비스 중단 가능성
- **완화 방안**: 
  - API 호출 실패 시 수동 입력 유도 (Fallback UI 제공)
  - Redis 캐싱으로 API 호출 빈도 최소화
  - Celery Worker에서 비동기 처리하여 메인 프로세스 블로킹 방지
  - 타임아웃 설정 (3초) 및 Retry 정책 (Exponential Backoff)

### 가격 계산 정확성
- **리스크**: 차종 등급 매핑 오류 또는 가격 정책 설정 실수로 잘못된 견적 제공
- **완화 방안**:
  - 차량 마스터 데이터와 가격 정책의 엄격한 검증 로직
  - 관리자 화면에서 가격 정책 변경 시 즉시 반영 테스트
  - 견적 산출 API 단위 테스트 작성
  - 결제 전 최종 금액 재확인 UI 제공

### PDF 생성 성능
- **리스크**: 대량의 이미지가 포함된 레포트 PDF 생성 시 서버 부하 및 응답 지연
- **완화 방안**:
  - Celery Worker로 비동기 처리 (사용자 대기 시간 제거)
  - 이미지 리사이징 및 압축 (업로드 시 처리)
  - PDF 생성 실패 시 재시도 메커니즘
  - 생성 완료 후 알림 발송 (사용자가 대기하지 않아도 됨)

## MVP 범위 결정

### V1에 포함할 것
- **핵심 프로세스**: 신청 → 결제 → 배정 → 진단 → 레포트 → 정산
- **수동 배정**: 자동 배정은 V2로 연기, 운영자 수동 배정으로 시작
- **기본 알림**: 카카오 알림톡 + SMS Fallback
- **간단한 정산**: 엑셀 다운로드 수준

### V1에서 제외할 것 (V2로 연기)
- 완전 자동 배정 시스템
- 기사 등급별 차등 배정 알고리즘
- 실시간 중고차 시세 분석 리포트 (V1은 침수/제원 확인만)
- B2B 파트너 전용 페이지
- AI 기반 레포트 요약

**이유**: V1에서는 "정확한 진단 접수와 배정"에 집중하여 기본 기능을 완성하는 것이 우선

## 리소스 제약

### 개발 인력
- **리스크**: 프론트엔드/백엔드 개발자 부족 또는 역할 분담 불명확
- **완화 방안**:
  - 명확한 API 명세서 작성 (프론트엔드/백엔드 병렬 개발 가능)
  - TypeScript 타입 정의 공유 (인터페이스 일치)
  - 주간 스프린트 회의로 진행 상황 공유

### 외부 API 비용
- **리스크**: 국토부/Car365 API 호출 비용 증가
- **완화 방안**:
  - Redis 캐싱으로 호출 빈도 최소화 (24시간 TTL)
  - 동일 차량번호 재조회 방지 (이미 조회한 경우 캐시 사용)
  - API 호출 모니터링 및 비용 추적

### 서버 인프라 비용
- **리스크**: 트래픽 증가에 따른 서버 확장 필요
- **완화 방안**:
  - V1은 단일 서버(Scale-up) 전략으로 시작
  - CDN 활용으로 서버 부하 분산
  - 이미지/PDF는 S3에 저장하여 서버 디스크 용량 절약
  - 모니터링 도구로 트래픽 추적 및 확장 시점 판단

# Appendix  
## 연구 및 조사 결과

### 벤치마킹 서비스 분석
- **카바조(Carvazo)**: 신뢰감 있는 랜딩 페이지, 단계별 신청 프로세스, 직관적인 레포트 뷰어
- **중고나라/당근마켓**: 간편한 차량 정보 입력 UI, 실시간 채팅 기능 (향후 고려)

### 기술 스택 선택 근거
- **Next.js**: SSR로 SEO 최적화 및 초기 로딩 속도 개선, React 생태계 활용
- **FastAPI**: 비동기 처리 성능, 자동 API 문서 생성, Python 생태계 활용
- **PostgreSQL + JSONB**: 관계형 데이터와 유연한 구조 데이터 동시 지원
- **Celery + Redis**: 비동기 작업 처리 및 캐싱을 하나의 인프라로 통합

## 기술 명세서 참조

### API 명세서
- 엔드포인트 상세 정의: `/script/4_api_spec.md`
- 인증, 공통, 고객, 기사, 운영자 API 분류
- Request/Response 형식 및 에러 처리 규칙

### 데이터베이스 스키마
- 테이블 구조 상세: `/script/5_db_schema.md`
- ERD 다이어그램: `/script/6_erd.md`
- 관계 정의 및 제약조건

### 시스템 아키텍처
- 인프라 구성: `/script/3_architecture.md`
- 배포 전략 (Non-Docker, systemd 기반)
- 네트워크 및 보안 설계

### UI/UX 설계
- 와이어프레임: `/script/7_ui_wireframe.md`
- 사이트맵: `/script/9_site_map.md`
- 사용자 플로우 및 화면 구성

### 시퀀스 다이어그램
- 핵심 비즈니스 로직 흐름: `/script/8_sequence_diagrams.md`
- 차량 조회 및 견적 산출
- 진단 신청 및 결제
- 기사 배정 프로세스
- 레포트 제출 및 PDF 생성

## 개발 가이드라인

### 코드 품질 규칙
- **Type Safety**: 프론트엔드/백엔드 간 타입 정의 일치 (Code Generator 활용 권장)
- **모듈화**: 가격 계산 로직(`PricingService`)과 외부 API 로직(`ExternalApiService`) 별도 모듈 분리
- **에러 로깅**: 외부 API 호출 실패 로그 별도 수집 (Sentry 등 활용)
- **Linting**: PR 제출 전 ESLint/Prettier 및 PEP8 검사 필수

### API 연동 규칙
- **Auth**: 모든 요청 헤더에 `Authorization: Bearer {token}` 포함
- **Caching**: `/api/vehicles/*` 계열 마스터 데이터 조회 API는 Redis 캐싱 필수 (TTL: 1시간 이상)
- **Latency**: 외부 API 호출 포함 로직은 타임아웃(3초) 설정, 실패 시 UI에 명확한 메시지 전달
- **Response**: `{ success: boolean, data: any, error: { code, message } }` 구조 준수

### 배포 체크리스트 (V1)
- [ ] 국산/수입 주요 차종 마스터 데이터 DB 적재 완료
- [ ] 경차~슈퍼카 등급별 추가 요금 정확히 계산되는지 검증
- [ ] 차량번호 입력 시 국토부 API를 통해 정보 불러와지는지 확인
- [ ] 고객 신청 → 운영자 수동 배정 → 기사 리포트 제출 프로세스 검증
- [ ] PG사 테스트 결제 및 취소 정상 작동 확인
- [ ] 개인정보(전화번호) 암호화 저장 확인
</PRD>
